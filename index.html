<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Veso's PGN Viewer - –¢–µ—Å—Ç</title>
<style>
  body { background: #121212; color: #eee; font-family: sans-serif; padding: 20px; }
  textarea { width: 100%; height: 150px; background: #1e1e1e; color: #f0f0f0; padding: 10px; border: 1px solid #444; font-family: monospace; }
  button { margin-top: 10px; margin-right: 10px; padding: 10px 15px; font-size: 16px; background: #333; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { background: #555; }
  #board { width: 400px; margin-top: 20px; }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css" />

</head>
<body>

<h2>Veso's PGN Viewer - –¢–µ—Å—Ç ü§†</h2>

<textarea id="pgn" placeholder="–ü–æ—Å—Ç–∞–≤–∏ —Ç—É–∫ PGN –ø–∞—Ä—Ç–∏—è—Ç–∞ —Å–∏..."></textarea><br />

<button id="loadBtn">–ó–∞—Ä–µ–¥–∏ –ø–∞—Ä—Ç–∏—è—Ç–∞</button>
<button id="prevBtn">–ü—Ä–µ–¥–∏—à–µ–Ω —Ö–æ–¥</button>
<button id="nextBtn">–°–ª–µ–¥–≤–∞—â —Ö–æ–¥</button>

<div id="board"></div>

<script src="https://cdn.jsdelivr.net/npm/chess.js@0.13.4/chess.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>

<script>
  const board = Chessboard('board', { draggable: false, position: 'start' });
  const chess = new Chess();
  let moves = [];
  let idx = 0;

  document.getElementById('loadBtn').addEventListener('click', () => {
    const pgnText = document.getElementById('pgn').value.trim();
    if (!pgnText) {
      alert('–ú–æ–ª—è, –ø–æ—Å—Ç–∞–≤–∏ PGN —Ç–µ–∫—Å—Ç.');
      return;
    }
    const loadSuccess = chess.load_pgn(pgnText);
    if (!loadSuccess) {
      alert('–ù–µ–≤–∞–ª–∏–¥–µ–Ω PGN!');
      return;
    }
    moves = chess.history();
    idx = 0;
    chess.reset();
    board.position(chess.fen());
  });

  document.getElementById('nextBtn').addEventListener('click', () => {
    if (idx < moves.length) {
      chess.move(moves[idx]);
      idx++;
      board.position(chess.fen());
    }
  });

  document.getElementById('prevBtn').addEventListener('click', () => {
    if (idx > 0) {
      chess.undo();
      idx--;
      board.position(chess.fen());
    }
  });
</script>

</body>
</html>
