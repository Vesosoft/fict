<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <title>Veso's PGN Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="libs/chessboard-0.3.0.min.css" />
  <style>
    body {
      background: #121212;
      color: #eee;
      font-family: sans-serif;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    body.light {
      background: #f9f9f9;
      color: #222;
    }
    textarea {
      width: 100%;
      height: 150px;
      background: #1e1e1e;
      color: #f0f0f0;
      padding: 10px;
      border: 1px solid #444;
      font-family: monospace;
      transition: background 0.3s, color 0.3s;
    }
    body.light textarea {
      background: #fff;
      color: #000;
      border: 1px solid #ccc;
    }
    button {
      margin: 5px;
      padding: 10px 15px;
      font-size: 16px;
      background: #333;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }
    button:hover {
      background: #555;
    }
    body.light button {
      background: #ddd;
      color: #222;
    }
    body.light button:hover {
      background: #bbb;
    }
    #board {
      width: 400px;
      margin-top: 20px;
    }
    #intro {
      margin-bottom: 15px;
      padding: 10px;
      background: #1e1e1e;
      border: 1px solid #444;
      border-radius: 8px;
      transition: background 0.3s, color 0.3s;
    }
    body.light #intro {
      background: #eee;
      border: 1px solid #ccc;
      color: #222;
    }
    #langSwitcher select {
      font-size: 16px;
      padding: 5px 10px;
      background: #333;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    body.light #langSwitcher select {
      background: #ddd;
      color: #222;
    }
    #themeToggleBtn {
      font-size: 14px;
      padding: 7px 12px;
      margin-left: 10px;
    }
  </style>
</head>
<body>

<h2>Veso's PGN Viewer ğŸ¤ </h2>

<div id="langSwitcher">
  <select id="langSelect">
    <option value="bg" selected>ğŸ‡§ğŸ‡¬ Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</option>
    <option value="ua">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
    <option value="cz">ğŸ‡¨ğŸ‡¿ ÄŒeÅ¡tina</option>
    <option value="pl">ğŸ‡µğŸ‡± Polski</option>
    <option value="ro">ğŸ‡·ğŸ‡´ RomÃ¢nÄƒ</option>
    <option value="en">ğŸ‡¬ğŸ‡§ English</option>
  </select>
  <button id="themeToggleBtn">ğŸŒ™</button>
</div>

<div id="intro">
  Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ¾ÑˆĞ»Ğ¸ Ğ² PGN Viewer-Ğ° Ğ½Ğ° Ğ’ĞµÑĞ¾! Ğ’ÑŠĞ²ĞµĞ´ĞµÑ‚Ğµ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ Ğ² PGN Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¸ Ñ Ğ³Ğ»ĞµĞ´Ğ°Ğ¹Ñ‚Ğµ Ñ…Ğ¾Ğ´ Ğ¿Ğ¾ Ñ…Ğ¾Ğ´. ĞĞ°ÑĞ»Ğ°Ğ´ĞµÑ‚Ğµ ÑĞµ! ğŸº
</div>

<textarea id="pgn">1. e4 e5 2. Nf3 Nc6 3. Bb5 a6</textarea><br />

<div>
  <button id="loadBtn">Ğ—Ğ°Ñ€ĞµĞ´Ğ¸ Ğ¿Ğ°Ñ€Ñ‚Ğ¸ÑÑ‚Ğ°</button>
  <button id="clearBtn">Ğ˜Ğ·Ñ‡Ğ¸ÑÑ‚Ğ¸</button>
  <button id="prevBtn">â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´</button>
  <button id="nextBtn">â¡ï¸ ĞĞ°Ğ¿Ñ€ĞµĞ´</button>
  <button id="autoBtn">â–¶ï¸ Auto</button>
  <button id="saveBtn">ğŸ’¾ Ğ—Ğ°Ğ¿Ğ°Ğ·Ğ¸</button>
</div>

<div id="board"></div>

<script src="libs/chess.min.js"></script>
<script src="libs/chessboard-0.3.0.min.js"></script>

<script>
const chess = new Chess();
<!-- let board = new Chessboard -->
  let board = Chessboard(document.getElementById('board'), {
  position: 'start',
  draggable: false,
  showNotation: true,
  pieceTheme: 'libs/img/chesspieces/wikipedia/{piece}.png'
});

let moves = [];
let currentMove = 0;
let autoInterval = null;

const pgnTextarea = document.getElementById('pgn');
const intro = document.getElementById('intro');
const langSelect = document.getElementById('langSelect');
const themeToggleBtn = document.getElementById('themeToggleBtn');

const intros = {
  bg: "Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ¾ÑˆĞ»Ğ¸ Ğ² PGN Viewer-Ğ° Ğ½Ğ° Ğ’ĞµÑĞ¾! Ğ’ÑŠĞ²ĞµĞ´ĞµÑ‚Ğµ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ Ğ² PGN Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¸ Ñ Ğ³Ğ»ĞµĞ´Ğ°Ğ¹Ñ‚Ğµ Ñ…Ğ¾Ğ´ Ğ¿Ğ¾ Ñ…Ğ¾Ğ´. ĞĞ°ÑĞ»Ğ°Ğ´ĞµÑ‚Ğµ ÑĞµ! ğŸº",
  ua: "Ğ›Ğ°ÑĞºĞ°Ğ²Ğ¾ Ğ¿Ñ€Ğ¾ÑĞ¸Ğ¼Ğ¾ Ğ´Ğ¾ Ğ¿ĞµÑ€ĞµĞ³Ğ»ÑĞ´Ğ°Ñ‡Ğ° PGN Ğ²Ñ–Ğ´ Ğ’ĞµÑĞ¾! Ğ’ÑÑ‚Ğ°Ğ²Ñ‚Ğµ Ğ¿Ğ°Ñ€Ñ‚Ñ–Ñ Ñƒ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ– PGN Ñ– Ğ¿ĞµÑ€ĞµĞ³Ğ»ÑĞ´Ğ°Ğ¹Ñ‚Ğµ Ñ…Ñ–Ğ´ Ğ·Ğ° Ñ…Ğ¾Ğ´Ğ¾Ğ¼. Ğ¡Ğ¼Ğ°Ñ‡Ğ½Ğ¾Ğ³Ğ¾! ğŸº",
  cz: "VÃ­tejte v PGN prohlÃ­Å¾eÄi od Vesa! VloÅ¾te partii ve formÃ¡tu PGN a sledujte ji tah po tahu. Na zdravÃ­! ğŸº",
  pl: "Witamy w przeglÄ…darce PGN Veso! Wklej partiÄ™ w formacie PGN i oglÄ…daj ruch po ruchu. Na zdrowie! ğŸº",
  ro: "Bine aÈ›i venit la vizualizatorul PGN al lui Veso! IntroduceÈ›i o partidÄƒ PGN È™i urmÄƒriÈ›i-o pas cu pas. Noroc! ğŸº",
  en: "Welcome to Veso's PGN Viewer! Paste your PGN game and watch it move by move. Enjoy! ğŸº"
};

const btnTexts = {
  bg: { load: "Ğ—Ğ°Ñ€ĞµĞ´Ğ¸ Ğ¿Ğ°Ñ€Ñ‚Ğ¸ÑÑ‚Ğ°", clear: "Ğ˜Ğ·Ñ‡Ğ¸ÑÑ‚Ğ¸", prev: "â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´", next: "â¡ï¸ ĞĞ°Ğ¿Ñ€ĞµĞ´", auto: "â–¶ï¸ Auto", stop: "â¸ï¸ Ğ¡Ğ¿Ñ€Ğ¸", save: "ğŸ’¾ Ğ—Ğ°Ğ¿Ğ°Ğ·Ğ¸" },
  ua: { load: "Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶Ğ¸Ñ‚Ğ¸ Ğ¿Ğ°Ñ€Ñ‚Ñ–Ñ", clear: "ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚Ğ¸", prev: "â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´", next: "â¡ï¸ Ğ’Ğ¿ĞµÑ€ĞµĞ´", auto: "â–¶ï¸ ĞĞ²Ñ‚Ğ¾", stop: "â¸ï¸ Ğ¡Ñ‚Ğ¾Ğ¿", save: "ğŸ’¾ Ğ—Ğ±ĞµÑ€ĞµĞ³Ñ‚Ğ¸" },
  cz: { load: "NaÄÃ­st partii", clear: "VyÄistit", prev: "â¬…ï¸ ZpÄ›t", next: "â¡ï¸ DalÅ¡Ã­", auto: "â–¶ï¸ Auto", stop: "â¸ï¸ Stop", save: "ğŸ’¾ UloÅ¾it" },
  pl: { load: "Wczytaj partiÄ™", clear: "WyczyÅ›Ä‡", prev: "â¬…ï¸ Wstecz", next: "â¡ï¸ Dalej", auto: "â–¶ï¸ Auto", stop: "â¸ï¸ Stop", save: "ğŸ’¾ Zapisz" },
  ro: { load: "ÃncarcÄƒ partida", clear: "CurÄƒÈ›Äƒ", prev: "â¬…ï¸ Ãnapoi", next: "â¡ï¸ UrmÄƒtor", auto: "â–¶ï¸ Auto", stop: "â¸ï¸ OpreÈ™te", save: "ğŸ’¾ SalveazÄƒ" },
  en: { load: "Load Game", clear: "Clear", prev: "â¬…ï¸ Prev", next: "â¡ï¸ Next", auto: "â–¶ï¸ Auto", stop: "â¸ï¸ Stop", save: "ğŸ’¾ Save" }
};

function setLang(lang) {
  intro.textContent = intros[lang] || intros['en'];
  const texts = btnTexts[lang] || btnTexts['en'];
  document.getElementById('loadBtn').textContent = texts.load;
  document.getElementById('clearBtn').textContent = texts.clear;
  document.getElementById('prevBtn').textContent = texts.prev;
  document.getElementById('nextBtn').textContent = texts.next;
  document.getElementById('saveBtn').textContent = texts.save;
  document.getElementById('autoBtn').textContent = autoInterval ? texts.stop : texts.auto;
}

document.getElementById('loadBtn').onclick = () => {
  const pgn = pgnTextarea.value.trim();
  if (!pgn) return alert(btnTexts[langSelect.value]?.load || "Please enter PGN.");
  if (!chess.load_pgn(pgn)) return alert("ĞĞµĞ²Ğ°Ğ»Ğ¸Ğ´ĞµĞ½ PGN!");
  moves = chess.history();
  currentMove = 0;
  updateBoard();
};

document.getElementById('clearBtn').onclick = () => {
  pgnTextarea.value = '';
  chess.reset();
  board.position('start');
  moves = [];
  currentMove = 0;
  if (autoInterval) {
    clearInterval(autoInterval);
    autoInterval = null;
    setLang(langSelect.value);
  }
};

document.getElementById('prevBtn').onclick = () => {
  if (currentMove > 0) currentMove--;
  updateBoard();
};

document.getElementById('nextBtn').onclick = () => {
  if (currentMove < moves.length) currentMove++;
  updateBoard();
};

document.getElementById('autoBtn').onclick = () => {
  const lang = langSelect.value;
  const texts = btnTexts[lang] || btnTexts['en'];
  if (autoInterval) {
    clearInterval(autoInterval);
    autoInterval = null;
    document.getElementById('autoBtn').textContent = texts.auto;
  } else {
    autoInterval = setInterval(() => {
      if (currentMove < moves.length) {
        currentMove++;
        updateBoard();
      } else {
        clearInterval(autoInterval);
        autoInterval = null;
        document.getElementById('autoBtn').textContent = texts.auto;
      }
    }, 1000);
    document.getElementById('autoBtn').textContent = texts.stop;
  }
};

document.getElementById('saveBtn').onclick = () => {
  const blob = new Blob([pgnTextarea.value], { type: 'text/plain' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'game.pgn';
  a.click();
};

function updateBoard() {
  chess.reset();
  for (let i = 0; i < currentMove; i++) {
    chess.move(moves[i]);
  }
  board.position(chess.fen());
}

langSelect.addEventListener('change', () => setLang(langSelect.value));

themeToggleBtn.onclick = () => {
  document.body.classList.toggle('light');
  themeToggleBtn.textContent = document.body.classList.contains('light') ? 'â˜€ï¸' : 'ğŸŒ™';
};

setLang('bg');
</script>

</body>
</html>
